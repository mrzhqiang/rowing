账户
====

基于前后端分离的架构，由前端路由管理账户的菜单权限，后端安全管理账户的接口权限。

菜单是指 URL 路径，由前端路由进行访问控制，菜单数据来源于后端接口，只有登录成功的用户才能获取菜单数据。

接口是指数据接口，由后端安全进行访问控制，可以考虑引入相关 ACL 框架，无需侵入数据实体即可实现访问控制权限。

**注意：无论菜单还是接口，一个必要前提就是必须有相对应的事物存在，即菜单对应的页面以及接口对应的数据，都要先开发出来，才可以进行操作。**

---

## 账户设计

账户一般是简单而纯粹的 用户名 + 密码 结构，使用账户类型区分普通角色和管理员角色，再通过一对一关系关联用户，一对多关系关联菜单等实体，从而形成强大的账户体系。

管理员角色包含普通角色的所有权限，这两个角色的接口权限由注解限定，因为接口只有开发出来才会声明权限，所以不需要动态设定接口权限。

而 ACL 可以对数据实体进行查阅、读写、删除以及管理等操作，因此可以视为动态数据权限框架。

### 用户

当前系统没有复杂的用户概念，简单起见，用户实体仅包含昵称、性别、生日三个字段，后续可以追加更多的用户信息，甚至在账户绑定其他社交账户之后，同步相关信息到用户实体中。

### 菜单

菜单是根据前端页面生成的数据，开发初期可以手动添加菜单数据到一个 json 文件，然后在初始化时，通过解析 json 文件得到菜单实体，再持久化到数据库。

后期可以考虑添加一个同步菜单数据的功能，由前端插件实现路由数据导出，再上传到后端接口，解析为菜单数据后，覆盖旧数据。

### 角色

这里简单列出不同的角色对应不同的页面，未来将逐渐完善。

- 普通用户
  - 门户首页
  - 考试页面
    - 待考列表
      - 进入考试
    - 已考列表
      - 成绩查询
- 管理员
  - 包括普通用户的所有权限
  - 系统管理
    - 系统初始化
    - 系统设置
    - 黑名单列表
    - 白名单列表
    - IP 访问列表
  - 账户管理
    - 账户列表
      - 用户信息
      - 用户菜单
      - 用户角色
      - 用户权限
    - 会话列表
  - 菜单管理
    - 菜单同步
  - 数据管理
    - 数据字典
