菜单
====

在前后端分离的设计中，菜单实际上是前端的路由数据，不同账户可能拥有不同的路由数据，并在登录成功时动态加载。

---

## 设计思路

菜单需要支持嵌套，即顶级菜单下，可以存在子级菜单，这些子级菜单也可以包含其他子级菜单，通常嵌套不超过三级。

通过观察`vue-element-admin`的路由设计，可以发现其遵循`Vue`的路由设计之外，在`meta`中还额外添加了一些信息，比如标题、图标以及角色等。

由于角色是单独的表，这里不再讨论，后续将通过第三张表联查角色与菜单的多对多关系，得以返回菜单下的角色列表数据，以及角色下的菜单列表。

对于`meta`中的其他数据，则可以存放在菜单表中，查询时直接返回即可。

## 数据建模

```mermaid
erDiagram
    Menu {
        bigint     id
        bigint     parent_id
        varchar    name
        varchar    path
        varchar    full-path
        varchar    component
        varchar    redirect
        bit        hidden
        bit        always-show
        varchar    title
        varchar    icon
        bit        no-cache
        bit        affix
        bit        breadcrumb
        varchar    active-menu
        integer    ordered
        bit        enabled
    }
```

- id：菜单 ID
- parent_id：上级菜单 ID，若为 null 则表示顶级菜单，非必填
- name：路由名称，用于 <keep-alive>，必填
- path：路径，用于浏览器地址，必填
- full-path：完整路径，根据上级路径补全的完整路径，必填
- component：前端的组件名称或组件路径，导入页面时需要，必填
- redirect：重定向，通常为第一个子级菜单的完整路径，当设置为 noRedirect 时，将无法从面包屑中跳转到当前菜单，非必填
- hidden: 是否隐藏，如果设置为 true 将不在侧边栏展示，默认为 false
- always-show: 是否始终显示，如果设置为 ture，将始终显示在主菜单上，如果未设置此项，则超过一个子菜单时，以嵌套方式展示，否则隐藏（如果存在一个子菜单，则显示这个子菜单）
- title：展示在侧边栏以及面包屑的标题，必填
- icon：展示在侧边栏的图标，非必填
- no-cache：如果设置为 true，页面将不会被缓存，默认为 false
- affix：固定，如果设置为 true 则在 TAG 中固定，非必填
- breadcrumb：面包屑，如果设置为 false 则在面包屑中隐藏，默认为 true
- active-menu：活动菜单，如果设置了路径，则在侧边栏高亮这个路径，非必填
- ordered：排序，如果不填写则根据创建时间排序，非必填
- enabled：启用，只有启用的菜单才会返回给前端，默认为 true
