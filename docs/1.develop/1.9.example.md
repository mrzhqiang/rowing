样例
====

样例是开发本系统的相关规范及简单步骤。

---

## 开发规范

通过建立相关规范，以便遇到棘手问题时，直接选择有利的一面继续进行，而不是犹犹豫豫反反复复，浪费宝贵的时间。

- 规范一：尽量在已有的框架下进行开发，除非有足够的理由需要添加新的框架
- 规范二：前端在开发页面时，先建立完整页面，完成前后端联调，再优化代码（即创建组件）
- 规范三：后端在开发接口时，除非`REST`不满足需求，才能手动创建`Controller`控制器及相关`Service`服务接口
- 规范四：各种命名必须规范化，参考动词在前名词在后的原则，尽量简洁清晰准确
- 规范五：每次提交的代码，必须保证运行正常

## 开发步骤

以开发菜单功能为例，描述一个简单的开发步骤。

- 设计原型图：不会画原型图的话，可以参考已有的系统页面进行模仿。
- 约定接口规范：比如路径名称、请求方式、请求参数、状态码、响应数据、权限标识等。
- 前端开发：
   - 创建`API`文件：如果需要访问后端接口，且作为独立的功能模块，则创建对应模块名称的 API 文件。
   - 导入`rest.js`函数，创建`API_NAME`常量并赋值为模块名称，注意，必须与后端接口的路径名称完全一致。
   - 根据`rest.js`中的相关函数，创建带后缀名称的函数，比如根据`findAll`创建`findAllMenu`函数，并传递`API_NAME`到`resource`参数。
   - 创建页面：根据原型图编写页面，优先使用`element-ui`中的组件，也可以自己创建组件，通常页面应该分开创建，避免杂糅。
   - 设置权限标识符：通常前后端完成初步联调，才有必要设置权限标识符，以便前端控制按钮显示，后端阻断非法请求。
- 后端开发：
  - 设计数据结构，进行数据建模：使用`JPA`创建对应实体和字段，建立相应的一对一、一对多、多对一、多对多关系。
  - 根据实体创建仓库，标记为`REST`资源（通常也可以不标记，需要自定义时才标记），至此完成`REST`接口。
  - 如有复杂需求，可以建立对应`Service`服务接口并实现，同时建立对应`Controller`控制器类提供`HTTP`接口。
  - 对于自定义接口，建议请求参数以`Form`作为后缀，比如`MenuForm`类，响应数据以`Data`作为后缀，比如`MenuData`类。
  - 可以通过`Mapper`将对应`XXForm`类转为实体，并将实体转为对应的`XXData`类。
  - 对于`REST`接口的响应数据，有时候并不需要所有字段，此时可以借助`Projection`投影来规避不相干字段。
  - 可以创建多个投影接口，只要命名不冲突即可，通常会选择其中一个投影接口作为响应数据列表的`Excerpt`摘要，可以理解为节省流量的缩略图。
  - 对于复杂查询，可以使用`QueryByExampleExecutor`实现，注意`REST`不能与`QueryByExampleExecutor`协作，必须通过自定义接口调用。
  - 设置权限标识符：对于公开的`REST`接口，需要重写对应的仓库方法并设置权限标识符，而自定义接口则在控制器方法上添加权限标识符。
- 前后端联调：完成初步联调，设置权限标识符之后，可以尝试完善国际化文本，并优化页面、代码以及性能，考虑是否加入缓存等等。
